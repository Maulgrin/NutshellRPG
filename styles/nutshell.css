.window-app.nutshell.sheet.actor {
  min-width: 586px;
  min-height: 877px;
}

.nutshell-sheet {
  --ink: #20170f;
  --ink-soft: #3b2a1b;
  --parchment: #f2e6c8;
  --parchment-dark: #dcc297;
  --brass: #b88b3b;
  --brass-deep: #8d652b;
  --copper: #875533;
  --steel: #6f665b;
  --shadow: rgba(19, 10, 5, 0.45);

  position: relative;
  overflow: hidden;
  color: var(--ink);
  padding: 14px;
  gap: 12px;
  border: 2px solid var(--brass);
  box-shadow: inset 0 0 0 1px #e4c786, 0 8px 24px var(--shadow);
  font-family: "IM FELL English", "Cinzel", "Garamond", "Book Antiqua", serif;
  background:
    radial-gradient(circle at 12% 10%, rgba(255, 248, 225, 0.2) 0%, rgba(255, 248, 225, 0) 36%),
    repeating-linear-gradient(
      45deg,
      rgba(255, 255, 255, 0.03) 0 10px,
      rgba(64, 40, 24, 0.07) 10px 20px
    ),
    url("../assets/steambg.png") center / cover no-repeat,
    linear-gradient(150deg, #3a281b 0%, #5a3d28 35%, #24180f 100%);
}

.nutshell-sheet::before,
.nutshell-sheet::after {
  content: "";
  position: absolute;
  pointer-events: none;
  border-radius: 50%;
  opacity: 0.2;
}

.nutshell-sheet::before {
  width: 210px;
  height: 210px;
  right: -80px;
  top: -70px;
  background:
    radial-gradient(circle at center, transparent 0 33px, rgba(235, 191, 109, 0.8) 33px 44px, transparent 44px),
    repeating-conic-gradient(from 0deg, rgba(235, 191, 109, 0.7) 0deg 9deg, transparent 9deg 18deg);
  animation: gear-turn 24s linear infinite;
}

.nutshell-sheet::after {
  width: 150px;
  height: 150px;
  left: -40px;
  bottom: -55px;
  background:
    radial-gradient(circle at center, transparent 0 24px, rgba(188, 138, 82, 0.85) 24px 34px, transparent 34px),
    repeating-conic-gradient(from 0deg, rgba(188, 138, 82, 0.7) 0deg 10deg, transparent 10deg 20deg);
  animation: gear-turn-reverse 18s linear infinite;
}

.nutshell-sheet > * {
  animation: panel-rise 460ms ease both;
}

.nutshell-sheet > *:nth-child(2) {
  animation-delay: 60ms;
}

.nutshell-sheet > *:nth-child(3) {
  animation-delay: 120ms;
}

.nutshell-sheet > *:nth-child(4) {
  animation-delay: 180ms;
}

.nutshell-sheet .sheet-header,
.nutshell-sheet .sheet-section,
.nutshell-sheet .sheet-footer {
  position: relative;
  border: 2px solid var(--brass-deep);
  box-shadow: inset 0 0 0 1px #efcc89, 0 2px 8px rgba(35, 20, 10, 0.2);
  padding: 10px;
  background:
    linear-gradient(180deg, rgba(255, 252, 242, 0.78) 0%, rgba(236, 220, 184, 0.86) 100%);
}

.nutshell-sheet .sheet-header::before,
.nutshell-sheet .sheet-section::before,
.nutshell-sheet .sheet-footer::before {
  content: "";
  position: absolute;
  inset: 4px;
  border: 1px solid rgba(105, 67, 34, 0.55);
  pointer-events: none;
}

.nutshell-sheet h2 {
  margin: 0 0 8px;
  color: #5a381c;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-size: 1rem;
  font-family: "Cinzel", "Garamond", "Book Antiqua", serif;
  border-bottom: 1px solid rgba(90, 56, 28, 0.45);
  padding-bottom: 4px;
}

.nutshell-sheet label {
  display: grid;
  gap: 4px;
  font-weight: 700;
  color: var(--ink-soft);
}

.nutshell-sheet input,
.nutshell-sheet textarea,
.nutshell-sheet select,
.nutshell-sheet button {
  font: inherit;
}

.nutshell-sheet input,
.nutshell-sheet textarea,
.nutshell-sheet select {
  width: 100%;
  border: 1px solid #7b572f;
  color: var(--ink);
  background: linear-gradient(180deg, #f7efd8 0%, #e8d8b2 100%);
  padding: 5px 7px;
}

.nutshell-sheet input[readonly] {
  background: linear-gradient(180deg, #ecdfc3 0%, #dfc797 100%);
  color: #4d3824;
}

.nutshell-sheet .top-layout {
  display: grid;
  gap: 12px;
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

.nutshell-sheet .primary-column {
  display: grid;
  gap: 12px;
  align-content: start;
}

.nutshell-sheet .strikes-grid {
  display: grid;
  gap: 10px;
  grid-template-columns: repeat(3, minmax(0, 1fr));
}

.nutshell-sheet .strikes-grid label {
  padding: 6px;
  border: 1px solid rgba(123, 87, 47, 0.5);
  background: rgba(245, 232, 197, 0.7);
}

.nutshell-sheet button {
  border: 1px solid #5b3e20;
  color: #2b1b0d;
  background: linear-gradient(180deg, #deb870 0%, #ba863f 100%);
  box-shadow: inset 0 1px 0 rgba(255, 230, 169, 0.6), 0 1px 3px rgba(34, 20, 10, 0.35);
  padding: 5px 9px;
  font-weight: 700;
  letter-spacing: 0.02em;
  transition: transform 120ms ease, filter 120ms ease;
}

.nutshell-sheet button:hover,
.nutshell-sheet button:focus {
  filter: brightness(1.07);
  transform: translateY(-1px);
}

.nutshell-sheet[data-theme="matrix"] {
  --ink: #b9ffb9;
  --ink-soft: #8dff8d;
  --brass: #1fa74d;
  --brass-deep: #0f6d31;
  --shadow: rgba(0, 0, 0, 0.65);
  isolation: isolate;
  border-color: #25ca5f;
  box-shadow: inset 0 0 0 1px rgba(122, 255, 122, 0.3), 0 8px 24px var(--shadow);
  font-family: "Share Tech Mono", "Consolas", "Lucida Console", monospace;
  background:
    linear-gradient(180deg, rgba(15, 80, 15, 0.08) 0%, rgba(0, 0, 0, 0) 65%),
    repeating-linear-gradient(
      0deg,
      rgba(86, 255, 114, 0.08) 0 1px,
      rgba(0, 0, 0, 0) 1px 4px
    ),
    url("../assets/fauxmatrix.png") center / cover no-repeat,
    linear-gradient(150deg, #020b03 0%, #031607 50%, #000500 100%);
}

.nutshell-sheet[data-theme="matrix"]::before,
.nutshell-sheet[data-theme="matrix"]::after {
  border-radius: 0;
  opacity: 0.22;
  z-index: 0;
  animation: matrix-drift 14s linear infinite;
}

.nutshell-sheet[data-theme="matrix"]::before {
  width: 25%;
  height: 100%;
  left: 0;
  top: 0;
  background:
    linear-gradient(90deg, rgba(20, 104, 42, 0.45) 0%, rgba(8, 44, 17, 0.25) 72%, rgba(0, 0, 0, 0) 100%),
    repeating-linear-gradient(
      90deg,
      rgba(136, 255, 149, 0.02) 0 5px,
      rgba(136, 255, 149, 0.32) 5px 6px,
      rgba(0, 0, 0, 0) 6px 10px
    ),
    repeating-linear-gradient(
      180deg,
      rgba(165, 255, 178, 0.95) 0 2px,
      rgba(165, 255, 178, 0.38) 2px 5px,
      rgba(0, 0, 0, 0) 5px 11px
    );
  background-size: 100% 100%, 100% 100%, 100% 160px;
  opacity: 0.45;
  animation: matrix-rain 6.8s linear infinite;
}

.nutshell-sheet[data-theme="matrix"] > * {
  position: relative;
  z-index: 1;
}

.nutshell-sheet[data-theme="matrix"]::after {
  width: 180px;
  height: 180px;
  left: -40px;
  bottom: -40px;
  background:
    repeating-linear-gradient(
      90deg,
      rgba(136, 255, 149, 0.2) 0 2px,
      rgba(0, 0, 0, 0) 2px 8px
    ),
    linear-gradient(90deg, rgba(136, 255, 149, 0.28) 0%, rgba(0, 0, 0, 0) 85%);
  animation-direction: reverse;
  animation-duration: 7s;
}

.nutshell-sheet[data-theme="matrix"] .sheet-header,
.nutshell-sheet[data-theme="matrix"] .sheet-section,
.nutshell-sheet[data-theme="matrix"] .sheet-footer {
  border-color: #147338;
  box-shadow: inset 0 0 0 1px rgba(123, 255, 145, 0.25), 0 2px 8px rgba(0, 0, 0, 0.35);
  background: linear-gradient(180deg, rgba(8, 35, 10, 0.9) 0%, rgba(4, 20, 8, 0.92) 100%);
}

.nutshell-sheet[data-theme="matrix"] .sheet-header::before,
.nutshell-sheet[data-theme="matrix"] .sheet-section::before,
.nutshell-sheet[data-theme="matrix"] .sheet-footer::before {
  border-color: rgba(119, 255, 143, 0.35);
}

.nutshell-sheet[data-theme="matrix"] h2 {
  color: #8eff8e;
  border-bottom-color: rgba(142, 255, 142, 0.35);
}

.nutshell-sheet[data-theme="matrix"] label {
  color: #92ff92;
}

.nutshell-sheet[data-theme="matrix"] input,
.nutshell-sheet[data-theme="matrix"] textarea,
.nutshell-sheet[data-theme="matrix"] select {
  border-color: #1a8a41;
  color: #c3ffc3;
  background: linear-gradient(180deg, rgba(5, 27, 8, 0.95) 0%, rgba(3, 16, 6, 0.98) 100%);
}

.nutshell-sheet[data-theme="matrix"] input[readonly] {
  color: #9ef59e;
  background: linear-gradient(180deg, rgba(7, 33, 11, 0.95) 0%, rgba(5, 22, 9, 0.98) 100%);
}

.nutshell-sheet[data-theme="matrix"] .strikes-grid label,
.nutshell-sheet[data-theme="matrix"] .skill-item {
  border-color: rgba(54, 183, 91, 0.7);
  box-shadow: inset 0 0 0 1px rgba(122, 255, 136, 0.12);
  background: linear-gradient(180deg, rgba(8, 30, 10, 0.92) 0%, rgba(3, 16, 6, 0.95) 100%);
}

.nutshell-sheet[data-theme="matrix"] button {
  border-color: #23a651;
  color: #c7ffc7;
  background: linear-gradient(180deg, #12622d 0%, #0c401d 100%);
  box-shadow: inset 0 1px 0 rgba(130, 255, 152, 0.25), 0 1px 3px rgba(0, 0, 0, 0.4);
}

.nutshell-sheet[data-theme="matrix"] button:hover,
.nutshell-sheet[data-theme="matrix"] button:focus {
  filter: brightness(1.18);
}

.nutshell-sheet[data-theme="scifi"] {
  --ink: #d6f4ff;
  --ink-soft: #9fd8f1;
  --brass: #4aaed6;
  --brass-deep: #2d6f91;
  --shadow: rgba(2, 6, 12, 0.8);
  isolation: isolate;
  border-color: #4eb9e8;
  box-shadow: inset 0 0 0 1px rgba(144, 222, 255, 0.3), 0 10px 26px var(--shadow);
  font-family: "Orbitron", "Exo 2", "Segoe UI", sans-serif;
  background:
    linear-gradient(170deg, rgba(5, 16, 30, 0.42) 0%, rgba(6, 10, 22, 0.52) 55%, rgba(2, 8, 18, 0.68) 100%),
    radial-gradient(circle at 22% 20%, rgba(111, 193, 235, 0.35) 0%, rgba(111, 193, 235, 0) 42%),
    url("../assets/spaceimage.png") center / cover no-repeat;
  background-blend-mode: multiply, screen, normal;
}

.nutshell-sheet[data-theme="scifi"]::before,
.nutshell-sheet[data-theme="scifi"]::after {
  border-radius: 0;
  z-index: 0;
}

.nutshell-sheet[data-theme="scifi"]::before {
  width: 42%;
  height: 100%;
  left: 0;
  top: 0;
  opacity: 0.5;
  background:
    repeating-linear-gradient(
      180deg,
      rgba(142, 224, 255, 0.5) 0 2px,
      rgba(2, 24, 44, 0) 2px 10px
    ),
    linear-gradient(90deg, rgba(37, 94, 131, 0.58) 0%, rgba(18, 57, 87, 0.24) 70%, rgba(0, 0, 0, 0) 100%);
  mix-blend-mode: screen;
  animation: scanline-drift 6.5s linear infinite;
}

.nutshell-sheet[data-theme="scifi"]::after {
  width: 220px;
  height: 220px;
  right: 12px;
  top: 10px;
  opacity: 0.62;
  background:
    radial-gradient(circle at center, rgba(118, 216, 255, 0.14) 0 18px, transparent 18px),
    radial-gradient(circle at center, transparent 0 30px, rgba(124, 215, 255, 0.9) 30px 34px, transparent 34px),
    radial-gradient(circle at center, transparent 0 56px, rgba(124, 215, 255, 0.62) 56px 59px, transparent 59px),
    radial-gradient(circle at center, transparent 0 86px, rgba(124, 215, 255, 0.42) 86px 88px, transparent 88px);
  mix-blend-mode: screen;
  animation: hud-pulse 2.8s ease-in-out infinite;
}

.nutshell-sheet[data-theme="scifi"] > * {
  position: relative;
  z-index: 1;
}

.nutshell-sheet[data-theme="scifi"] .sheet-header,
.nutshell-sheet[data-theme="scifi"] .sheet-section,
.nutshell-sheet[data-theme="scifi"] .sheet-footer {
  border-color: #3378a4;
  box-shadow: inset 0 0 0 1px rgba(146, 222, 255, 0.25), 0 2px 10px rgba(2, 7, 15, 0.45);
  background: linear-gradient(180deg, rgba(7, 26, 45, 0.64) 0%, rgba(5, 17, 31, 0.74) 100%);
}

.nutshell-sheet[data-theme="scifi"] .sheet-header::before,
.nutshell-sheet[data-theme="scifi"] .sheet-section::before,
.nutshell-sheet[data-theme="scifi"] .sheet-footer::before {
  border-color: rgba(125, 213, 255, 0.35);
}

.nutshell-sheet[data-theme="scifi"] h2 {
  color: #c2ecff;
  border-bottom-color: rgba(120, 210, 255, 0.4);
}

.nutshell-sheet[data-theme="scifi"] label {
  color: #9fd8f1;
}

.nutshell-sheet[data-theme="scifi"] input,
.nutshell-sheet[data-theme="scifi"] textarea,
.nutshell-sheet[data-theme="scifi"] select {
  border-color: #388ab4;
  color: #dbf5ff;
  background: linear-gradient(180deg, rgba(7, 27, 45, 0.95) 0%, rgba(4, 14, 27, 0.96) 100%);
}

.nutshell-sheet[data-theme="scifi"] input[readonly] {
  color: #b9e9ff;
  background: linear-gradient(180deg, rgba(10, 36, 58, 0.95) 0%, rgba(6, 22, 39, 0.96) 100%);
}

.nutshell-sheet[data-theme="scifi"] .strikes-grid label,
.nutshell-sheet[data-theme="scifi"] .skill-item {
  border-color: rgba(75, 169, 215, 0.75);
  box-shadow: inset 0 0 0 1px rgba(152, 227, 255, 0.15);
  background: linear-gradient(180deg, rgba(9, 30, 49, 0.9) 0%, rgba(4, 16, 30, 0.92) 100%);
}

.nutshell-sheet[data-theme="scifi"] button {
  border-color: #55b9e3;
  color: #e3f8ff;
  background: linear-gradient(180deg, #2f87b1 0%, #205e83 100%);
  box-shadow: inset 0 1px 0 rgba(190, 237, 255, 0.35), 0 1px 4px rgba(1, 6, 12, 0.5);
}

.nutshell-sheet[data-theme="scifi"] button:hover,
.nutshell-sheet[data-theme="scifi"] button:focus {
  filter: brightness(1.12);
}

.nutshell-sheet[data-theme="cthulhu"] {
  --ink: #e7dfc7;
  --ink-soft: #c7bca1;
  --brass: #7d6d4f;
  --brass-deep: #4e4734;
  --shadow: rgba(3, 2, 1, 0.82);
  isolation: isolate;
  border-color: #7a6b4c;
  box-shadow: inset 0 0 0 1px rgba(204, 188, 146, 0.24), 0 10px 26px var(--shadow);
  font-family: "Cormorant Garamond", "Garamond", "Book Antiqua", serif;
  background:
    radial-gradient(circle at 80% 12%, rgba(92, 124, 84, 0.14) 0%, rgba(92, 124, 84, 0) 34%),
    linear-gradient(165deg, rgba(18, 14, 10, 0.5) 0%, rgba(16, 11, 8, 0.62) 56%, rgba(10, 8, 6, 0.74) 100%),
    url("../assets/CoCinvestigate.png") center / cover no-repeat;
  background-blend-mode: screen, multiply, normal;
}

.nutshell-sheet[data-theme="cthulhu"]::before,
.nutshell-sheet[data-theme="cthulhu"]::after {
  border-radius: 0;
  z-index: 0;
}

.nutshell-sheet[data-theme="cthulhu"]::before {
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
  opacity: 0.34;
  background:
    radial-gradient(circle at 18% 74%, rgba(103, 143, 98, 0.32) 0%, rgba(21, 36, 19, 0) 38%),
    radial-gradient(circle at 72% 30%, rgba(76, 108, 70, 0.2) 0%, rgba(19, 28, 16, 0) 44%),
    repeating-linear-gradient(
      -22deg,
      rgba(124, 150, 111, 0.07) 0 1px,
      rgba(0, 0, 0, 0) 1px 15px
    );
  mix-blend-mode: screen;
  animation: cthulhu-mist 12s ease-in-out infinite alternate;
}

.nutshell-sheet[data-theme="cthulhu"]::after {
  width: 190px;
  height: 190px;
  right: -40px;
  bottom: -24px;
  opacity: 0.5;
  background:
    radial-gradient(circle at center, transparent 0 30px, rgba(118, 155, 102, 0.52) 30px 34px, transparent 34px),
    radial-gradient(circle at center, transparent 0 60px, rgba(118, 155, 102, 0.3) 60px 63px, transparent 63px);
  mix-blend-mode: screen;
  animation: cthulhu-sigil 6.4s ease-in-out infinite;
}

.nutshell-sheet[data-theme="cthulhu"] > * {
  position: relative;
  z-index: 1;
}

.nutshell-sheet[data-theme="cthulhu"] .sheet-header,
.nutshell-sheet[data-theme="cthulhu"] .sheet-section,
.nutshell-sheet[data-theme="cthulhu"] .sheet-footer {
  border-color: #6b6043;
  box-shadow: inset 0 0 0 1px rgba(184, 168, 128, 0.2), 0 2px 10px rgba(0, 0, 0, 0.52);
  background: linear-gradient(180deg, rgba(24, 18, 12, 0.74) 0%, rgba(15, 12, 9, 0.8) 100%);
}

.nutshell-sheet[data-theme="cthulhu"] .sheet-header::before,
.nutshell-sheet[data-theme="cthulhu"] .sheet-section::before,
.nutshell-sheet[data-theme="cthulhu"] .sheet-footer::before {
  border-color: rgba(170, 153, 111, 0.35);
}

.nutshell-sheet[data-theme="cthulhu"] .sheet-header {
  overflow: visible;
}

.nutshell-sheet[data-theme="cthulhu"] .sheet-header > * {
  position: relative;
  z-index: 2;
}

.nutshell-sheet[data-theme="cthulhu"] .sheet-header::after {
  content: "";
  position: absolute;
  width: 220px;
  height: 230px;
  left: -86px;
  top: -108px;
  pointer-events: none;
  z-index: 1;
  opacity: 0.76;
  border-radius: 52% 48% 58% 42% / 40% 56% 44% 60%;
  transform-origin: 26% 16%;
  background:
    radial-gradient(130px 42px at 28% 20%, rgba(113, 150, 96, 0.88) 0 56%, transparent 60%),
    radial-gradient(142px 38px at 34% 42%, rgba(96, 133, 83, 0.86) 0 55%, transparent 60%),
    radial-gradient(128px 34px at 32% 62%, rgba(81, 116, 71, 0.82) 0 54%, transparent 59%),
    radial-gradient(106px 30px at 36% 81%, rgba(69, 98, 60, 0.78) 0 54%, transparent 60%),
    radial-gradient(circle at 19% 23%, rgba(218, 246, 196, 0.42) 0 7px, transparent 8px),
    radial-gradient(circle at 27% 38%, rgba(218, 246, 196, 0.36) 0 6px, transparent 7px),
    radial-gradient(circle at 31% 57%, rgba(218, 246, 196, 0.3) 0 5px, transparent 6px),
    radial-gradient(circle at 38% 75%, rgba(218, 246, 196, 0.28) 0 5px, transparent 6px),
    linear-gradient(140deg, rgba(176, 215, 142, 0.22) 0%, rgba(176, 215, 142, 0) 52%);
  filter: drop-shadow(0 7px 10px rgba(0, 0, 0, 0.52));
  animation: cthulhu-tentacle-writhe 8.4s ease-in-out infinite;
}

.nutshell-sheet[data-theme="cthulhu"] h2 {
  color: #d9cfb1;
  border-bottom-color: rgba(156, 178, 132, 0.35);
}

.nutshell-sheet[data-theme="cthulhu"] label {
  color: #cbbf9f;
}

.nutshell-sheet[data-theme="cthulhu"] input,
.nutshell-sheet[data-theme="cthulhu"] textarea,
.nutshell-sheet[data-theme="cthulhu"] select {
  border-color: #786a4b;
  color: #e7dfc7;
  background: linear-gradient(180deg, rgba(25, 19, 13, 0.94) 0%, rgba(17, 13, 10, 0.95) 100%);
}

.nutshell-sheet[data-theme="cthulhu"] input[readonly] {
  color: #d9cfb6;
  background: linear-gradient(180deg, rgba(36, 28, 18, 0.93) 0%, rgba(22, 17, 12, 0.95) 100%);
}

.nutshell-sheet[data-theme="cthulhu"] .strikes-grid label,
.nutshell-sheet[data-theme="cthulhu"] .skill-item {
  border-color: rgba(108, 123, 82, 0.74);
  box-shadow: inset 0 0 0 1px rgba(156, 181, 121, 0.14);
  background: linear-gradient(180deg, rgba(30, 23, 16, 0.88) 0%, rgba(17, 13, 10, 0.92) 100%);
}

.nutshell-sheet[data-theme="cthulhu"] button {
  border-color: #6d8256;
  color: #efe5ce;
  background: linear-gradient(180deg, #556a43 0%, #3b4d31 100%);
  box-shadow: inset 0 1px 0 rgba(188, 207, 152, 0.26), 0 1px 4px rgba(0, 0, 0, 0.54);
}

.nutshell-sheet[data-theme="cthulhu"] button:hover,
.nutshell-sheet[data-theme="cthulhu"] button:focus {
  filter: brightness(1.11);
}

.nutshell-sheet[data-theme="western"] {
  --ink: #2e1c11;
  --ink-soft: #5f3c25;
  --brass: #be8749;
  --brass-deep: #7f542e;
  --shadow: rgba(33, 16, 6, 0.6);
  isolation: isolate;
  border-color: #9a6436;
  box-shadow: inset 0 0 0 1px rgba(228, 191, 135, 0.3), 0 10px 24px var(--shadow);
  font-family: "Alegreya SC", "Bree Serif", "Georgia", serif;
  background:
    linear-gradient(170deg, rgba(67, 33, 14, 0.36) 0%, rgba(44, 22, 9, 0.5) 55%, rgba(27, 14, 7, 0.62) 100%),
    radial-gradient(circle at 72% 18%, rgba(246, 206, 143, 0.2) 0%, rgba(246, 206, 143, 0) 42%),
    url("../assets/westernbg.png") center / cover no-repeat;
  background-blend-mode: multiply, screen, normal;
}

.nutshell-sheet[data-theme="western"]::before,
.nutshell-sheet[data-theme="western"]::after {
  border-radius: 0;
  z-index: 0;
}

.nutshell-sheet[data-theme="western"]::before {
  width: 100%;
  height: 25%;
  left: 0;
  top: 0;
  opacity: 0.3;
  background:
    radial-gradient(260px 110px at 22% 55%, rgba(236, 187, 112, 0.4) 0%, rgba(236, 187, 112, 0) 75%),
    radial-gradient(220px 90px at 62% 42%, rgba(224, 168, 90, 0.34) 0%, rgba(224, 168, 90, 0) 76%),
    repeating-linear-gradient(
      -9deg,
      rgba(226, 176, 101, 0.16) 0 3px,
      rgba(0, 0, 0, 0) 3px 14px
    );
  background-size: 110% 100%, 100% 100%, 170% 100%;
  mix-blend-mode: screen;
  animation: western-dust-blow-primary 14s linear infinite;
}

.nutshell-sheet[data-theme="western"]::after {
  width: 130%;
  height: 26%;
  left: -18%;
  top: -2%;
  opacity: 0.24;
  background:
    radial-gradient(300px 120px at 78% 44%, rgba(232, 184, 110, 0.34) 0%, rgba(232, 184, 110, 0) 75%),
    radial-gradient(240px 90px at 38% 60%, rgba(222, 160, 88, 0.26) 0%, rgba(222, 160, 88, 0) 76%),
    repeating-linear-gradient(
      12deg,
      rgba(220, 160, 85, 0.13) 0 4px,
      rgba(0, 0, 0, 0) 4px 16px
    );
  background-size: 100% 100%, 100% 100%, 180% 100%;
  animation: western-dust-blow-secondary 10.5s ease-in-out infinite;
}

.nutshell-sheet[data-theme="western"] > * {
  position: relative;
  z-index: 1;
}

.nutshell-sheet[data-theme="western"] .sheet-header,
.nutshell-sheet[data-theme="western"] .sheet-section,
.nutshell-sheet[data-theme="western"] .sheet-footer {
  border-color: #7a4e2d;
  box-shadow: inset 0 0 0 1px rgba(223, 179, 113, 0.24), 0 2px 9px rgba(33, 16, 6, 0.34);
  background: linear-gradient(180deg, rgba(250, 234, 200, 0.8) 0%, rgba(229, 199, 147, 0.84) 100%);
}

.nutshell-sheet[data-theme="western"] .sheet-header::before,
.nutshell-sheet[data-theme="western"] .sheet-section::before,
.nutshell-sheet[data-theme="western"] .sheet-footer::before {
  border-color: rgba(128, 86, 48, 0.52);
}

.nutshell-sheet[data-theme="western"] h2 {
  color: #6a4120;
  border-bottom-color: rgba(108, 67, 33, 0.4);
}

.nutshell-sheet[data-theme="western"] label {
  color: #603c24;
}

.nutshell-sheet[data-theme="western"] input,
.nutshell-sheet[data-theme="western"] textarea,
.nutshell-sheet[data-theme="western"] select {
  border-color: #865a35;
  color: #311d11;
  background: linear-gradient(180deg, rgba(250, 237, 209, 0.96) 0%, rgba(234, 208, 160, 0.95) 100%);
}

.nutshell-sheet[data-theme="western"] input[readonly] {
  color: #52331f;
  background: linear-gradient(180deg, rgba(241, 224, 186, 0.96) 0%, rgba(219, 188, 140, 0.95) 100%);
}

.nutshell-sheet[data-theme="western"] .strikes-grid label,
.nutshell-sheet[data-theme="western"] .skill-item {
  border-color: rgba(145, 98, 54, 0.68);
  box-shadow: inset 0 0 0 1px rgba(247, 220, 169, 0.34);
  background: linear-gradient(180deg, rgba(248, 232, 199, 0.9) 0%, rgba(231, 203, 154, 0.9) 100%);
}

.nutshell-sheet[data-theme="western"] button {
  border-color: #744525;
  color: #2a170c;
  background: linear-gradient(180deg, #e6b468 0%, #b47a3e 100%);
  box-shadow: inset 0 1px 0 rgba(255, 222, 154, 0.65), 0 1px 4px rgba(40, 20, 8, 0.4);
}

.nutshell-sheet[data-theme="western"] button:hover,
.nutshell-sheet[data-theme="western"] button:focus {
  filter: brightness(1.1);
}

.nutshell-sheet .sheet-footer {
  display: grid;
  gap: 8px;
  grid-template-columns: 1fr;
}

.nutshell-sheet .sheet-footer button {
  width: 100%;
}

.nutshell-sheet .theme-selector-wrap {
  margin-bottom: 0.35em;
}

.nutshell-sheet .theme-selector {
  font-family: inherit;
  width: 100%;
  margin-bottom: 1em;
}

.nutshell-sheet select.theme-selector,
.nutshell-sheet[data-theme] select.theme-selector {
  color: #1b140d;
  background: linear-gradient(180deg, #efe6cf 0%, #d9c79f 100%);
  border-color: #6f5432;
}

.nutshell-sheet select.theme-selector option {
  color: #1b140d;
  background: #e6d8b9;
}

.nutshell-sheet .skills-grid {
  display: grid;
  gap: 8px;
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

.nutshell-sheet .skill-item {
  border: 1px solid #8f6938;
  background: linear-gradient(180deg, rgba(247, 237, 212, 0.84) 0%, rgba(229, 208, 164, 0.9) 100%);
  box-shadow: inset 0 0 0 1px rgba(255, 236, 187, 0.55);
  padding: 8px;
  display: grid;
  gap: 6px;
  align-items: end;
  grid-template-columns: minmax(0, 1fr) 90px 72px;
}

.nutshell-sheet .skill-item label {
  font-weight: 700;
}

.nutshell-sheet .skill-item input {
  width: 100%;
}

.nutshell-sheet .skill-validation {
  margin: 0;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 0.72rem;
  line-height: 1;
  font-weight: 700;
  white-space: nowrap;
}

.nutshell-sheet .skill-validation-row {
  grid-column: 2;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  flex-wrap: nowrap;
  align-self: start;
  justify-self: start;
}

.nutshell-sheet .skill-action-button {
  padding: 2px 6px;
  min-height: 0;
  line-height: 1.2;
  font-size: 0.64rem;
  letter-spacing: 0.04em;
}

.nutshell-sheet .skill-lock-toggle {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  font-size: 0.68rem;
  font-weight: 700;
  line-height: 1;
  white-space: nowrap;
}

.nutshell-sheet .skill-lock-toggle input[type="checkbox"] {
  width: 0.72rem;
  height: 0.72rem;
  margin: 0;
}

.nutshell-sheet .skill-validation-icon {
  width: 0.85rem;
  height: 0.85rem;
  display: inline-grid;
  place-items: center;
  border: 1px solid currentColor;
  border-radius: 50%;
  line-height: 1;
}

.nutshell-sheet .skill-validation.is-valid {
  color: #0f7f2c;
}

.nutshell-sheet .skill-validation.is-valid .skill-validation-icon::before {
  content: "\2713";
}

.nutshell-sheet .skill-validation.is-invalid {
  color: #a11717;
}

.nutshell-sheet .skill-validation.is-invalid .skill-validation-icon::before {
  content: "X";
}

.nutshell-chat-card {
  color: var(--ink);
}

.nutshell-chat-card h3 {
  margin: 0 0 8px;
  color: #5a381c;
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

.nutshell-chat-table {
  width: 100%;
  border-collapse: collapse;
  background: linear-gradient(180deg, #f3e8cb 0%, #e4cf9f 100%);
}

.nutshell-chat-table th,
.nutshell-chat-table td {
  border: 1px solid #6d4a28;
  padding: 4px 6px;
  text-align: left;
}

.nutshell-result-success {
  color: #0c7d21;
  font-weight: 700;
}

.nutshell-result-failure {
  color: #a11717;
  font-weight: 700;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th,
td {
  border: 1px solid #6d4a28;
  padding: 4px;
  text-align: center;
}

@media (max-width: 860px) {
  .nutshell-sheet .top-layout {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 700px) {
  .nutshell-sheet .skills-grid {
    grid-template-columns: 1fr;
  }

  .nutshell-sheet .skill-item {
    grid-template-columns: 1fr;
  }

  .nutshell-sheet .skill-validation-row {
    grid-column: 1;
  }
}

@media (prefers-reduced-motion: reduce) {
  .nutshell-sheet > *,
  .nutshell-sheet::before,
  .nutshell-sheet::after,
  .nutshell-sheet[data-theme="cthulhu"] .sheet-header::after,
  .nutshell-sheet button {
    animation: none;
    transition: none;
  }
}

@keyframes panel-rise {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes gear-turn {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes gear-turn-reverse {
  from {
    transform: rotate(360deg);
  }
  to {
    transform: rotate(0deg);
  }
}

@keyframes matrix-drift {
  from {
    transform: translateY(-2px);
  }
  to {
    transform: translateY(10px);
  }
}

@keyframes matrix-rain {
  from {
    background-position: 0 0, 0 0, 0 -160px;
  }
  to {
    background-position: 0 0, 0 0, 0 0;
  }
}

@keyframes scanline-drift {
  from {
    background-position: 0 -220px, 0 0;
  }
  to {
    background-position: 0 0, 0 0;
  }
}

@keyframes hud-pulse {
  0%,
  100% {
    transform: scale(0.92);
    opacity: 0.34;
  }
  50% {
    transform: scale(1.14);
    opacity: 0.86;
  }
}

@keyframes western-dust-blow-primary {
  0%,
  100% {
    transform: translateX(-6%) translateY(0);
    opacity: 0.22;
    background-position: 0 0, 0 0, 0 0;
  }
  40% {
    transform: translateX(2%) translateY(1px);
    opacity: 0.36;
    background-position: 0 0, 0 0, -42px 0;
  }
  70% {
    transform: translateX(7%) translateY(-1px);
    opacity: 0.3;
    background-position: 0 0, 0 0, -86px 0;
  }
}

@keyframes western-dust-blow-secondary {
  0%,
  100% {
    transform: translateX(0) translateY(0);
    opacity: 0.17;
    background-position: 0 0, 0 0, 0 0;
  }
  50% {
    transform: translateX(-5%) translateY(2px);
    opacity: 0.31;
    background-position: 0 0, 0 0, 52px 0;
  }
}

@keyframes cthulhu-mist {
  from {
    transform: translateX(-1.5%) translateY(-1%);
    opacity: 0.26;
  }
  to {
    transform: translateX(1.2%) translateY(1.6%);
    opacity: 0.42;
  }
}

@keyframes cthulhu-sigil {
  0%,
  100% {
    transform: scale(0.95);
    opacity: 0.35;
  }
  50% {
    transform: scale(1.08);
    opacity: 0.62;
  }
}

@keyframes cthulhu-tentacle-writhe {
  0%,
  100% {
    transform: translate(0, 0) rotate(-14deg) scale(1);
  }
  30% {
    transform: translate(8px, 3px) rotate(-7deg) scale(1.04);
  }
  60% {
    transform: translate(-6px, 10px) rotate(-18deg) scale(0.97);
  }
  82% {
    transform: translate(3px, 6px) rotate(-12deg) scale(1.02);
  }
}
